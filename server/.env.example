# ============================================
# StickerNest v2 Backend Environment Variables
# ============================================
# Copy this file to .env and fill in your values

# -----------------
# Server Configuration
# -----------------
NODE_ENV=development
PORT=3001
HOST=0.0.0.0

# -----------------
# Database (PostgreSQL)
# -----------------
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
# For Supabase, use the connection string from your project settings
DATABASE_URL=postgresql://stickernest:stickernest_dev_password@localhost:5432/stickernest?schema=public

# -----------------
# JWT Authentication
# -----------------
# Generate secure secrets with: openssl rand -base64 64
JWT_ACCESS_SECRET=your-super-secure-access-token-secret-min-32-chars
JWT_REFRESH_SECRET=your-super-secure-refresh-token-secret-min-32-chars
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# -----------------
# CORS
# -----------------
# Comma-separated list of allowed origins
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# -----------------
# Storage (S3/R2 Compatible)
# -----------------
# Cloudflare R2, AWS S3, or MinIO endpoint
STORAGE_ENDPOINT=http://localhost:9000
STORAGE_REGION=auto
STORAGE_ACCESS_KEY_ID=minioadmin
STORAGE_SECRET_ACCESS_KEY=minioadmin123
STORAGE_BUCKET_USER_WIDGETS=user-widgets
STORAGE_BUCKET_SYSTEM_WIDGETS=system-widgets
STORAGE_BUCKET_ASSETS=assets

# -----------------
# AI Providers (optional - configure as needed)
# -----------------
# Anthropic (Claude) - for text and widget generation
ANTHROPIC_API_KEY=sk-ant-...

# OpenAI (GPT/DALL-E) - for text and image generation
OPENAI_API_KEY=sk-...

# Replicate - for FLUX images, video gen, LoRA training
REPLICATE_API_TOKEN=r8_...

# -----------------
# OAuth Providers (configure at least one for social login)
# -----------------
# Google OAuth 2.0 - https://console.developers.google.com/
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth - https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Discord OAuth - https://discord.com/developers/applications
DISCORD_CLIENT_ID=your-discord-client-id
DISCORD_CLIENT_SECRET=your-discord-client-secret

# OAuth redirect base URL (optional, defaults to server host)
# OAUTH_REDIRECT_BASE_URL=http://localhost:3001

# Frontend URL for OAuth callback redirects
FRONTEND_URL=http://localhost:5173

# -----------------
# Rate Limiting
# -----------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------
# Feature Flags
# -----------------
ENABLE_MARKETPLACE=true
ENABLE_AI_GENERATION=true

# -----------------
# Scaling Configuration
# -----------------
# Set to 'distributed' for multi-server deployments with Redis pub/sub
# Set to 'local' for single-server (default, auto-detected)
SCALING_MODE=local

# Redis URL for distributed mode
# Used for: WebSocket pub/sub across servers, job queue, session sync
REDIS_URL=redis://localhost:6379

# ============================================
# Docker Compose Variables (for local dev)
# ============================================

# PostgreSQL
POSTGRES_USER=stickernest
POSTGRES_PASSWORD=stickernest_dev_password
POSTGRES_DB=stickernest
POSTGRES_PORT=5432

# Redis
REDIS_PORT=6379

# MinIO (S3-compatible storage)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# Prisma Studio
PRISMA_STUDIO_PORT=5555

# Backend
BACKEND_PORT=3001
